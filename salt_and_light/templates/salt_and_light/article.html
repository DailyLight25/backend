{% extends "salt_and_light/base.html" %}
{% block title %}{{ post.title }} - Salt & Light{% endblock %}
{% block content %}
    <h1>{{ post.title }}</h1>
    <p>By {{ post.author.username }} | {{ post.created_at }}</p>
    <div>{{ post.content|safe }}</div>
    {% if post.file %}
        <p><a href="{{ post.file.path }}">Download File</a></p>
    {% endif %}
    <h3>Reactions</h3>
    <p>{{ post.reactions|default:"No reactions yet" }}</p>
    <form method="post" action="{% url 'react' post.id %}">
        {% csrf_token %}
        <button type="submit" name="reaction" value="like">Like</button>
        <button type="submit" name="reaction" value="dislike">Dislike</button>
    </form>
    <h3>Comments</h3>
    {% for comment in comments %}
        <div>
            <p>{{ comment.content }} - {{ comment.author.username }} | {{ comment.created_at }}</p>
        </div>
    {% empty %}
        <p>No comments yet.</p>
    {% endfor %}
    <h3>Affiliate Links</h3>
    <p>Support us: <a href="https://example.com/affiliate">Buy Books</a></p>
    <p>Donate via M-Pesa: Contact us for details.</p>
{% endblock %}